<!DOCTYPE html>
<html lang="zh-hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æš—åŒºçªå›´ Â· å·åƒæ¨¡æ‹Ÿå™¨ (æœ€ç»ˆç‰ˆ)</title>
    <!-- Font Awesome å›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* ========== å…¨å±€æ ·å¼ ========== */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            padding: 16px;
            color: #1a1a1a;
        }
        .container { max-width: 800px; margin: 0 auto; }
        .text-center { text-align: center; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-8 { margin-top: 2rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-5 { margin-bottom: 1.25rem; }
        .ml-2 { margin-left: 0.5rem; }
        .p-4 { padding: 1rem; }
        .p-5 { padding: 1.25rem; }
        .w-full { width: 100%; }
        .font-semibold { font-weight: 600; }
        .text-lg { font-size: 1.125rem; }
        .rounded-box { border-radius: 12px; }
        .bg-white { background-color: #ffffff; }
        .border { border: 1px solid #e5e7eb; }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            cursor: pointer;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s;
            display: inline-block;
            background-color: #e0e0e0;
            color: #1a1a1a;
            margin: 0 4px;
        }
        .btn-secondary { background-color: #6c757d; color: white; }
        .btn-info { background-color: #17a2b8; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn:hover { opacity: 0.85; }

        /* å®¹å™¨å¡ç‰‡ */
        .items-grid {
            display: grid;
            gap: 16px;
            padding: 16px;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        }
        .item-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .item-card:hover {
            border-color: #17a2b8;
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        .item-image {
            width: 60px;
            height: 60px;
            background: #f0f2f5;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            margin-bottom: 12px;
        }
        .item-name { font-size: 16px; font-weight: 600; margin-bottom: 8px; }
        .badge {
            background: #17a2b8;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
        }

        /* ========== 5x4 ç½‘æ ¼ ========== */
        .grid-wrapper {
            position: relative;
            margin: 16px 0;
            background: #ffffff;
            padding: 4px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 4px;
            background-color: #e0e0e0;
            padding: 4px;
            border-radius: 4px;
        }
        .grid-cell {
            aspect-ratio: 1 / 1;
            background-color: #ffffff;
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            font-size: 12px;
            color: white;
        }
        /* ç¨€æœ‰åº¦èƒŒæ™¯è‰² */
        .grade1 { background-color: #5a5a5a; } /* ç™½ */
        .grade2 { background-color: #2e7d32; } /* ç»¿ */
        .grade3 { background-color: #1565c0; } /* è“ */
        .grade4 { background-color: #6a1b9a; } /* ç´« */
        .grade5 { background-color: #b76e1e; } /* é‡‘ */
        .grade6 { background-color: #b71c1c; } /* çº¢ */

        /* ç‰©å“è¦†ç›–å±‚ï¼ˆè·¨æ ¼å›¾ç‰‡æˆ– emoji å ä½ï¼‰ */
        .item-cover {
            position: absolute;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            z-index: 15;
            pointer-events: none;
            display: flex;
            align-items: flex-end;
            justify-content: flex-end;
            padding: 4px;
        }
        .item-cover .item-details {
            color: #ffd700;
            text-shadow: 1px 1px 1px black;
            background: rgba(0,0,0,0.5);
            padding: 2px 4px;
            border-radius: 4px;
            font-size: 9px;
            display: flex;
            gap: 4px;
        }
        .item-name-short {
            max-width: 60px; /* å®¹çº³6ä¸ªä¸­æ–‡å­—ç¬¦ */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        /* æ— å›¾ç‰‡æ—¶çš„ emoji å ä½ */
        .item-cover .emoji-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            color: white;
            text-shadow: 1px 1px 2px black;
        }

        /* æ•´ä½“æœç´¢è’™ç‰ˆï¼ˆæ­£è®¡æ—¶ï¼‰ */
        .overall-mask {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
            border-radius: 8px;
            color: white;
        }
        .overall-mask .search-text { font-size: 16px; margin-bottom: 4px; }
        .overall-mask .timer { font-size: 14px; font-family: monospace; }

        /* ç‰©å“è’™ç‰ˆï¼ˆå…¬è½¬æ”¾å¤§é•œï¼‰ */
        .mask-overlay {
            position: absolute;
            background: #000000;
            border-radius: 4px;
            z-index: 10;
            pointer-events: none;
            overflow: hidden;
        }
        .orbit-container {
            width: 100%;
            height: 100%;
            position: relative;
            animation: orbit 1s linear infinite;
            transform-origin: center center;
        }
        .orbit-container i {
            position: absolute;
            font-size: 40px;
            color: #ffffff;
            top: 45%;
            left: 45%;
            transform: translate(-50%, -50%);
            animation: counter-orbit 1s linear infinite;
        }
        @keyframes orbit {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes counter-orbit {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(-360deg); }
        }

        /* æ§åˆ¶å° */
        .console-panel {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-top: 20px;
            border: 1px solid #e5e7eb;
        }
        .fieldset {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 16px;
        }
        .legend { font-weight: 600; padding: 0 8px; }
        .label {
            display: inline-flex;
            align-items: center;
            margin-right: 16px;
            cursor: pointer;
        }
        .checkbox { width: 16px; height: 16px; margin-right: 4px; }

        /* å¼¹çª— */
        .modal {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-header { font-size: 18px; font-weight: 600; margin-bottom: 16px; }
        .record-category {
            font-size: 16px;
            font-weight: 600;
            margin: 12px 0 8px;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 4px;
        }
        .record-item {
            display: inline-block;
            width: 100px;
            margin: 4px;
            padding: 8px;
            background: #f9fafb;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e5e7eb;
        }
        .close-btn { margin-top: 16px; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center text-lg font-semibold mt-2">æš—åŒºçªå›´ Â· å·åƒæ¨¡æ‹Ÿå™¨</h1>

        <!-- åˆå§‹æç¤º -->
        <div id="jinggao" class="p-4 mt-4 bg-white rounded-box text-center border">
            <div class="item-image" style="margin:0 auto;">ğŸ­</div>
            <div class="mt-4">ä½ æ˜¯ä¸€åªç”µè§†å°çš„é¼ é¼ ã€‚å¤–é¢ç‚®ç«è¿å¤©ï¼Œä½ åœ¨è§’è½ç‘Ÿç‘Ÿå‘æŠ–ï¼Œæ— æ„ä¸­çœ‹åˆ°äº†ä¸€ä¸ªè§£é”ä½†æ˜¯æœªå¼€å¯çš„ä¿é™©â€¦â€¦</div>
            <button class="btn btn-info mt-4" onclick="start()">è¿›å…¥ä¿é™©ç®±</button>
        </div>

        <!-- ä¸»æ¨¡æ‹Ÿå™¨åŒºåŸŸ (åˆå§‹éšè—) -->
        <div id="moniqi" style="display: none;">
            <!-- å®¹å™¨åˆ—è¡¨ (åªæœ‰ä¸€ä¸ªä¿é™©ç®±) -->
            <div id="container-list" class="items-grid"></div>

            <!-- æœç´¢ç½‘æ ¼åŒºåŸŸ (åˆå§‹éšè—) -->
            <div id="search-area" style="display: none;">
                <div class="flex justify-between items-center mb-2">
                    <span id="search-title" class="text-lg font-semibold">ç¬¬1æ¬¡æœåˆ® ä¿é™©ç®±</span>
                    <span id="total-price" class="text-lg" style="color:#b45309;">0</span>
                </div>
                <!-- ç½‘æ ¼åŒ…è£…å™¨ï¼Œç”¨äºç»å¯¹å®šä½è’™ç‰ˆ -->
                <div id="grid-wrapper" class="grid-wrapper">
                    <div id="grid" class="grid-container"></div>
                </div>

                <!-- æ“ä½œæŒ‰é’® -->
                <div class="text-center mt-4">
                    <button id="btn-continue" class="btn btn-secondary" onclick="continueSearch()">ç»§ç»­åƒ</button>
                    <button id="btn-back" class="btn btn-info" onclick="backToList()">åƒå…¶ä»–çš„</button>
                    <button id="btn-records" class="btn btn-success" onclick="showRecords()">å¾—åƒè®°å½•</button>
                </div>
            </div>
        </div>

        <!-- æ§åˆ¶å° -->
        <div class="console-panel">
            <div class="fieldset">
                <div class="legend">ğŸ“Š å¾—åƒè®°å½•</div>
                <button class="btn btn-success" onclick="showRecords()">æŸ¥çœ‹è®°å½•</button>
                <button class="btn btn-secondary ml-2" onclick="clearRecords()">æ¸…é™¤è®°å½•</button>
            </div>
            <div class="fieldset">
                <div class="legend">âš™ï¸ æ§åˆ¶å°</div>
                <label class="label"><input type="checkbox" class="checkbox" id="chk_name" checked> æ˜¾ç¤ºé•¿åç§°</label>
                <label class="label"><input type="checkbox" class="checkbox" id="chk_sound"> éŸ³æ•ˆ</label>
                <label class="label"><input type="checkbox" class="checkbox" id="chk_highrate"> é«˜çˆ†ç‡æ¨¡å¼ (å››æ ¼å…­æ ¼æ›´å¤š)</label>
                <label class="label"><input type="checkbox" class="checkbox" id="chk_vibrate"> éœ‡åŠ¨åé¦ˆ (å‡ºé‡‘æ—¶)</label>
            </div>
            <div class="text-sm" style="color:#6b7280;">æ³¨ï¼šä»…ä¸ºå¨±ä¹ï¼Œä¸ä»£è¡¨æ¸¸æˆå®é™…æ¦‚ç‡ã€‚</div>
        </div>
    </div>

    <!-- å¾—åƒè®°å½•å¼¹çª— -->
    <div id="recordsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">ğŸ“‹ å¾—åƒè®°å½•</div>
            <div id="recordsContent"></div>
            <div class="close-btn"><button class="btn" onclick="closeModal()">å…³é—­</button></div>
        </div>
    </div>

    <!-- éŸ³é¢‘é¢„ç•™ -->
    <audio id="sound-coin" src="sounds/coin.mp3" preload="auto"></audio>
    <audio id="sound-purple" src="sounds/purple.mp3" preload="auto"></audio>
    <audio id="sound-gold-small" src="sounds/gold_small.mp3" preload="auto"></audio>
    <audio id="sound-gold-big" src="sounds/gold_big.mp3" preload="auto"></audio>
    <!-- æ•´ä½“æœç´¢éŸ³æ•ˆåˆ†ä¸ºä¸¤æ®µ -->
    <audio id="sound-overall-start" src="sounds/overall_start.mp3" preload="auto"></audio>
    <audio id="sound-overall-loop" src="sounds/overall_loop.mp3" preload="auto" loop></audio>

    <script>
        // ---------- å…¨å±€å˜é‡ ----------
        const ROWS = 5;
        const COLS = 4;
        let currentContainerId = 1;
        let currentItems = [];
        let gridState = [];
        let searchCount = 0;
        let isSearching = false;
        let revealTimeouts = [];
        let overallAudio = null; // ç”¨äºå­˜å‚¨å¾ªç¯æ’­æ”¾çš„éŸ³é¢‘å¯¹è±¡

        // é«˜çˆ†ç‡å¼€å…³
        let IsHighRate = false;
        // éœ‡åŠ¨å¼€å…³
        let IsVibrate = false;
        // éŸ³æ•ˆå¼€å…³
        let soundEnabled = false;

        // ç‰©å“ç±»åˆ«
        const CATEGORY = { COIN:1, PURPLE:2, GOLD_SMALL:3, GOLD_BIG:4 };

        // æœç´¢æ—¶é—´ (æ¯«ç§’)
        const SEARCH_TIME = {
            [CATEGORY.COIN]: 1000,
            [CATEGORY.PURPLE]: 1700,
            [CATEGORY.GOLD_SMALL]: 2500,
            [CATEGORY.GOLD_BIG]: 3500
        };

        // ç¨€æœ‰åº¦é¢œè‰²
        const gradeColors = {
            1:'grade1',2:'grade2',3:'grade3',4:'grade4',5:'grade5',6:'grade6'
        };

        // éŸ³æ•ˆå¼€å…³
        document.getElementById('chk_sound').addEventListener('change', (e) => {
            soundEnabled = e.target.checked;
            // å¦‚æœå…³é—­éŸ³æ•ˆä¸”æ•´ä½“æœç´¢éŸ³é¢‘æ­£åœ¨æ’­æ”¾ï¼Œåœæ­¢å®ƒ
            if (!soundEnabled && overallAudio) {
                overallAudio.pause();
                overallAudio.currentTime = 0;
                overallAudio = null;
            }
        });

        // é«˜çˆ†ç‡å¼€å…³
        document.getElementById('chk_highrate').addEventListener('change', (e) => {
            IsHighRate = e.target.checked;
        });

        // éœ‡åŠ¨å¼€å…³
        document.getElementById('chk_vibrate').addEventListener('change', (e) => {
            IsVibrate = e.target.checked;
        });

        // æ’­æ”¾éŸ³æ•ˆå‡½æ•°ï¼ˆå¯é‡å ï¼Œæ¯æ¬¡æ–°å»º Audio å¯¹è±¡ï¼‰
        function playSound(type) {
            if (!soundEnabled) return;
            const src = {
                'coin': 'sounds/coin.mp3',
                'purple': 'sounds/purple.mp3',
                'goldSmall': 'sounds/gold_small.mp3',
                'goldBig': 'sounds/gold_big.mp3'
            }[type];
            if (!src) return;
            const audio = new Audio(src);
            audio.play().catch(() => {}); // å¿½ç•¥è‡ªåŠ¨æ’­æ”¾é™åˆ¶é”™è¯¯
        }

        // å¼€å§‹æ’­æ”¾æ•´ä½“æœç´¢éŸ³æ•ˆï¼ˆå…ˆæ’­æ”¾ä¸€æ¬¡ startï¼Œç„¶åå¾ªç¯ loopï¼‰
        function playOverallLoop() {
            if (!soundEnabled) return;
            // æ’­æ”¾ä¸€æ¬¡ start éŸ³æ•ˆ
            const startAudio = new Audio('sounds/overall_start.mp3');
            startAudio.play().catch(() => {});
            // æ’­æ”¾å¾ªç¯éŸ³æ•ˆ
            stopOverallLoop(); // ç¡®ä¿ä¹‹å‰æ²¡æœ‰æ­£åœ¨æ’­æ”¾çš„å¾ªç¯
            overallAudio = new Audio('sounds/overall_loop.mp3');
            overallAudio.loop = true;
            overallAudio.play().catch(() => {});
        }

        // åœæ­¢æ•´ä½“æœç´¢å¾ªç¯éŸ³æ•ˆ
        function stopOverallLoop() {
            if (overallAudio) {
                overallAudio.pause();
                overallAudio.currentTime = 0;
                overallAudio = null;
            }
        }

        // éœ‡åŠ¨å‡½æ•° (å‡ºé‡‘æ—¶è°ƒç”¨)
        function vibrateIfGold(category) {
            if (!IsVibrate) return;
            if (category === CATEGORY.GOLD_SMALL || category === CATEGORY.GOLD_BIG) {
                if (navigator.vibrate) {
                    navigator.vibrate(200);
                }
            }
        }

        // ---------- ç§‘æ©å¸ ----------
        const coinBase = { id:'coin', name:'ç§‘æ©å¸', grade:1, priceRange:[1000,1085], width:1, height:1, emoji:'ğŸ’°', image:'images/coin.png', category:CATEGORY.COIN };

        // ---------- å¤§é‡‘ç‰©å“ (ä»·æ ¼ â‰¥16w) ----------
        const goldBigItems = [
            // æ¨ªå…­ 3x2
            { id:'fsyb', name:'ç«ç‚®å‘å°„è¯åŒ…', grade:5, price:210000, width:3, height:2, emoji:'ğŸ”¥', image:'images/fsyb.png', category:CATEGORY.GOLD_BIG },
            { id:'xlclq', name:'å‘é‡å¤„ç†å™¨', grade:5, price:210000, width:3, height:2, emoji:'âš™ï¸', image:'images/xlclq.png', category:CATEGORY.GOLD_BIG },
            { id:'zjmk', name:'æ­£ææ¨¡å—', grade:5, price:210000, width:3, height:2, emoji:'ğŸ”‹', image:'images/zjmk.png', category:CATEGORY.GOLD_BIG },
            { id:'dzjxb', name:'å¤šè½´æœºæ¢°è‡‚', grade:5, price:210000, width:3, height:2, emoji:'ğŸ¦¾', image:'images/dzjxb.png', category:CATEGORY.GOLD_BIG },
            { id:'sja', name:'è®¾è®¡æ¡ˆ', grade:5, price:450000, width:3, height:2, emoji:'ğŸ“„', image:'images/sja.png', category:CATEGORY.GOLD_BIG },
            { id:'hjyl', name:'é»„é‡‘å“‘é“ƒ', grade:5, price:450000, width:3, height:2, emoji:'ğŸ‹ï¸', image:'images/hjyl.png', category:CATEGORY.GOLD_BIG },
            { id:'flw', name:'çç…ç¢—', grade:5, price:230000, width:3, height:2, emoji:'ğŸ¥£', image:'images/flw.png', category:CATEGORY.GOLD_BIG },
            { id:'mzgt', name:'æ°‘æ—æŒ‚æ¯¯', grade:5, price:200000, width:3, height:2, emoji:'ğŸª¢', image:'images/mzgt.png', category:CATEGORY.GOLD_BIG },
            { id:'jsdx', name:'é‡‘ç‹®é›•åƒ', grade:5, price:450000, width:3, height:2, emoji:'ğŸ¦', image:'images/jsdx.png', category:CATEGORY.GOLD_BIG },
            { id:'lxg', name:'ç†æƒ³å›½', grade:5, price:2000000, width:3, height:2, emoji:'ğŸ›ï¸', image:'images/lxg.png', category:CATEGORY.GOLD_BIG },
            // ç«–å…­ 2x3
            { id:'dxsy', name:'é›•åƒç››å®´', grade:5, price:450000, width:2, height:3, emoji:'ğŸ—¿', image:'images/dxsy.png', category:CATEGORY.GOLD_BIG },
            // å››æ ¼ 2x2
            { id:'sjh', name:'æ°´æ™¶ç›’', grade:5, price:200000, width:2, height:2, emoji:'ğŸ’', image:'images/sjh.png', category:CATEGORY.GOLD_BIG },
            { id:'jjyl', name:'é‡‘é©¹è·ƒå²­é›•åƒ', grade:5, price:220000, width:2, height:2, emoji:'ğŸ', image:'images/jjyl.png', category:CATEGORY.GOLD_BIG },
            { id:'klxz', name:'ç§‘ä¼¦å‹‹ç« ', grade:5, price:160000, width:2, height:2, emoji:'ğŸ–ï¸', image:'images/klxz.png', category:CATEGORY.GOLD_BIG },
            { id:'jzz', name:'é‡‘åº§é’Ÿ', grade:5, price:160000, width:2, height:2, emoji:'â°', image:'images/jzz.png', category:CATEGORY.GOLD_BIG },
            { id:'ystb', name:'ç¾½é¥°æå®', grade:5, price:160000, width:2, height:2, emoji:'ğŸª¶', image:'images/ystb.png', category:CATEGORY.GOLD_BIG },
            { id:'rgxz', name:'äººå·¥å¿ƒè„', grade:5, price:190000, width:2, height:2, emoji:'â¤ï¸', image:'images/rgxz.png', category:CATEGORY.GOLD_BIG },
            { id:'psjx', name:'ç›˜è›‡é‡‘åƒ', grade:5, price:250000, width:2, height:2, emoji:'ğŸ', image:'images/psjx.png', category:CATEGORY.GOLD_BIG },
            { id:'bsxl', name:'å®çŸ³é¡¹é“¾', grade:5, price:450000, width:2, height:2, emoji:'ğŸ’', image:'images/bsxl.png', category:CATEGORY.GOLD_BIG },
            { id:'gdch', name:'å¤è‘£èŒ¶å£¶', grade:5, price:430000, width:2, height:2, emoji:'ğŸµ', image:'images/gdch.png', category:CATEGORY.GOLD_BIG },
            { id:'dwmk', name:'ç›®æ ‡å®šä½æ¨¡å—', grade:5, price:430000, width:2, height:2, emoji:'ğŸ¯', image:'images/dwmk.png', category:CATEGORY.GOLD_BIG },
            { id:'hp', name:'èŠ±ç“¶', grade:5, price:430000, width:2, height:2, emoji:'ğŸº', image:'images/hp.png', category:CATEGORY.GOLD_BIG },
            // æ–°å¢å››æ ¼å¤§é‡‘
            { id:'rwr', name:'RWRé¢æ¿', grade:5, price:170000, width:2, height:2, emoji:'ğŸ“¡', image:'images/rwr.png', category:CATEGORY.GOLD_BIG },
            { id:'gyb', name:'å·¥ä¸šçº§ä¸‡ç”¨è¡¨', grade:5, price:170000, width:2, height:2, emoji:'ğŸ“Ÿ', image:'images/gyb.png', category:CATEGORY.GOLD_BIG },
            { id:'ryfsq', name:'çƒ­è¯±å‘å°„å™¨', grade:5, price:170000, width:2, height:2, emoji:'ğŸ”¥', image:'images/ryfsq.png', category:CATEGORY.GOLD_BIG },
            { id:'ggnl', name:'å†ˆæ ¼å°¼å°”è“å›¾', grade:5, price:170000, width:2, height:2, emoji:'ğŸ“œ', image:'images/ggnl.png', category:CATEGORY.GOLD_BIG },
            // æ¨ªäºŒ 2x1
            { id:'ssh', name:'é¦–é¥°ç›’', grade:5, price:190000, width:2, height:1, emoji:'ğŸ“¿', image:'images/ssh.png', category:CATEGORY.GOLD_BIG },
            { id:'wxmx', name:'å«æ˜Ÿæ¨¡å‹', grade:5, price:160000, width:2, height:1, emoji:'ğŸ›°ï¸', image:'images/wxmx.png', category:CATEGORY.GOLD_BIG },
            { id:'gdjp', name:'å¤è‘£é•œç‰‡', grade:5, price:170000, width:2, height:1, emoji:'ğŸ”', image:'images/gdjp.png', category:CATEGORY.GOLD_BIG },
            { id:'rcxmk', name:'çƒ­æˆåƒæ¨¡å—', grade:5, price:600000, width:2, height:1, emoji:'ğŸ”¬', image:'images/rcxmk.png', category:CATEGORY.GOLD_BIG },
            { id:'jmwj', name:'æœºå¯†æ–‡ä»¶', grade:6, price:5000000, width:2, height:1, emoji:'ğŸ“', image:'images/jmwj.png', category:CATEGORY.GOLD_BIG },
            // ç«–äºŒ 1x2
            { id:'zljp', name:'é˜µåˆ—é•œç‰‡', grade:5, price:480000, width:1, height:2, emoji:'ğŸ”¬', image:'images/zljp.png', category:CATEGORY.GOLD_BIG },
            { id:'gdhzh', name:'å¤è‘£åŒ–å¦†ç›’', grade:5, price:190000, width:1, height:2, emoji:'ğŸ’„', image:'images/gdhzh.png', category:CATEGORY.GOLD_BIG },
            { id:'zsyk', name:'é’»çŸ³åŸçŸ¿', grade:5, price:180000, width:1, height:2, emoji:'ğŸ’', image:'images/zsyk.png', category:CATEGORY.GOLD_BIG },
            { id:'ymb', name:'ç¾½æ¯›ç¬”', grade:5, price:160000, width:1, height:2, emoji:'âœ’ï¸', image:'images/ymb.png', category:CATEGORY.GOLD_BIG },
            // ä¸€æ ¼ 1x1
            { id:'yzsc', name:'ç‰è´¨æ‰‹ä¸²', grade:5, price:160000, width:1, height:1, emoji:'ğŸ“¿', image:'images/yzsc.png', category:CATEGORY.GOLD_BIG },
            { id:'jzgb', name:'é‡‘åˆ¶é’¢ç¬”', grade:5, price:160000, width:1, height:1, emoji:'ğŸ–‹ï¸', image:'images/jzgb.png', category:CATEGORY.GOLD_BIG },
            { id:'cb', name:'åŸå ¡', grade:5, price:160000, width:1, height:1, emoji:'ğŸ°', image:'images/cb.png', category:CATEGORY.GOLD_BIG }
        ];

        // ---------- å°é‡‘ç‰©å“ (ä»·æ ¼ 1w~8w) ----------
        const goldSmallItems = [
            // æ¨ªå…« 4x2 (ä¸“ç”¨ç”µæ± ç»„)
            { id:'zydc', name:'ä¸“ç”¨ç”µæ± ç»„', grade:5, price:65000, width:4, height:2, emoji:'ğŸ”‹', image:'images/zydc.png', category:CATEGORY.GOLD_SMALL },
            // æ¨ªå…­ 3x2
            { id:'uspdy', name:'USPç”µæº', grade:5, price:50000, width:3, height:2, emoji:'ğŸ”Œ', image:'images/uspdy.png', category:CATEGORY.GOLD_SMALL },
            { id:'gym', name:'éš”éŸ³æ£‰', grade:5, price:20000, width:3, height:2, emoji:'ğŸ§±', image:'images/gym.png', category:CATEGORY.GOLD_SMALL },
            { id:'qcxd', name:'æ±½è½¦è“„ç”µæ± ', grade:5, price:20000, width:3, height:2, emoji:'ğŸ”‹', image:'images/qcxd.png', category:CATEGORY.GOLD_SMALL },
            // ç«–å…­ 2x3
            { id:'ryt', name:'ç‡ƒæ²¹æ¡¶', grade:5, price:15000, width:2, height:3, emoji:'â›½', image:'images/ryt.png', category:CATEGORY.GOLD_SMALL },
            { id:'thjb', name:'é’›åˆé‡‘æ¿', grade:5, price:20000, width:2, height:3, emoji:'ğŸ”©', image:'images/thjb.png', category:CATEGORY.GOLD_SMALL },
            { id:'yykz', name:'æ¶²å‹æ‰©å¼ å™¨', grade:5, price:50000, width:2, height:3, emoji:'ğŸ”§', image:'images/yykz.png', category:CATEGORY.GOLD_SMALL },
            // å››æ ¼ 2x2
            { id:'bjdn', name:'ç¬”è®°æœ¬ç”µè„‘', grade:5, price:55000, width:2, height:2, emoji:'ğŸ’»', image:'images/bjdn.png', category:CATEGORY.GOLD_SMALL },
            { id:'bjxc', name:'é’¯é‡‘çº¿æ', grade:5, price:50000, width:2, height:2, emoji:'ğŸ“¿', image:'images/bjxc.png', category:CATEGORY.GOLD_SMALL },
            { id:'gnrl', name:'é«˜èƒ½ç‡ƒæ–™', grade:5, price:15000, width:2, height:2, emoji:'ğŸ”¥', image:'images/gnrl.png', category:CATEGORY.GOLD_SMALL },
            { id:'gtyq', name:'å®«å»·é“¶å™¨', grade:5, price:50000, width:2, height:2, emoji:'ğŸ¥ˆ', image:'images/gtyq.png', category:CATEGORY.GOLD_SMALL },
            { id:'jgmk', name:'æ¿€å…‰å®šä½æ¨¡å—', grade:5, price:50000, width:2, height:2, emoji:'ğŸ¯', image:'images/jgmk.png', category:CATEGORY.GOLD_SMALL },
            { id:'jyc', name:'é›†é‚®å†Œ', grade:5, price:20000, width:2, height:2, emoji:'ğŸ“®', image:'images/jyc.png', category:CATEGORY.GOLD_SMALL },
            { id:'jydt', name:'å†›ç”¨ç”µå°', grade:5, price:20000, width:2, height:2, emoji:'ğŸ“»', image:'images/jydt.png', category:CATEGORY.GOLD_SMALL },
            { id:'lpdzj', name:'è€ç‰Œæ‰“å­—æœº', grade:5, price:50000, width:2, height:2, emoji:'ğŸ“ ', image:'images/lpdzj.png', category:CATEGORY.GOLD_SMALL },
            { id:'lsj', name:'ç•™å£°æœº', grade:5, price:50000, width:2, height:2, emoji:'ğŸµ', image:'images/lsj.png', category:CATEGORY.GOLD_SMALL },
            { id:'syj', name:'æ‘„å½±æœº', grade:5, price:55000, width:2, height:2, emoji:'ğŸ“¹', image:'images/syj.png', category:CATEGORY.GOLD_SMALL },
            { id:'twcc', name:'ä½“å¤–é™¤é¢¤ä»ª', grade:5, price:50000, width:2, height:2, emoji:'âš¡', image:'images/twcc.png', category:CATEGORY.GOLD_SMALL },
            { id:'tx', name:'å¤©çº¿', grade:5, price:20000, width:2, height:2, emoji:'ğŸ“¡', image:'images/tx.png', category:CATEGORY.GOLD_SMALL },
            // æ–°å¢äºŒæ ¼å°é‡‘ 2x1
            { id:'spy', name:'æ°´å¹³ä»ª', grade:5, price:55000, width:2, height:1, emoji:'ğŸ“', image:'images/spy.png', category:CATEGORY.GOLD_SMALL },
            // æ¨ªäºŒ 2x1
            { id:'jbdx', name:'é‡‘è±¹é›•åƒ', grade:5, price:15000, width:2, height:1, emoji:'ğŸ†', image:'images/jbdx.png', category:CATEGORY.GOLD_SMALL },
            { id:'jz', name:'é‡‘ç –', grade:5, price:55000, width:2, height:1, emoji:'ğŸ§±', image:'images/jz.png', category:CATEGORY.GOLD_SMALL },
            { id:'wxsc', name:'ç»´ä¿®æ‰‹å†Œ', grade:5, price:20000, width:2, height:1, emoji:'ğŸ“š', image:'images/wxsc.png', category:CATEGORY.GOLD_SMALL },
            { id:'xk', name:'æ˜¾å¡', grade:5, price:15000, width:2, height:1, emoji:'ğŸ’»', image:'images/xk.png', category:CATEGORY.GOLD_SMALL },
            { id:'yybs', name:'æ¶²å‹æ‰³æ‰‹', grade:5, price:23000, width:2, height:1, emoji:'ğŸ”§', image:'images/yybs.png', category:CATEGORY.GOLD_SMALL },
            // ç«–äºŒ 1x2
            { id:'jb', name:'é‡‘æ¯', grade:5, price:60000, width:1, height:2, emoji:'ğŸ†', image:'images/jb.png', category:CATEGORY.GOLD_SMALL },
            { id:'yxj', name:'æ¸¸æˆæœº', grade:5, price:15000, width:1, height:2, emoji:'ğŸ®', image:'images/yxj.png', category:CATEGORY.GOLD_SMALL },
            // ç«–ä¸‰ 1x3
            { id:'jgz', name:'é‡‘æ‹æ–', grade:5, price:15000, width:1, height:3, emoji:'ğŸ¦¯', image:'images/jgz.png', category:CATEGORY.GOLD_SMALL },
            // ä¸€æ ¼ 1x1
            { id:'jmf', name:'é‡‘é­”æ–¹', grade:5, price:50000, width:1, height:1, emoji:'ğŸ”²', image:'images/jmf.png', category:CATEGORY.GOLD_SMALL },
            { id:'jsb', name:'é‡‘æ‰‹è¡¨', grade:5, price:15000, width:1, height:1, emoji:'âŒš', image:'images/jsb.png', category:CATEGORY.GOLD_SMALL },
            { id:'jsj', name:'é‡‘æ‰‹æœº', grade:5, price:25000, width:1, height:1, emoji:'ğŸ“±', image:'images/jsj.png', category:CATEGORY.GOLD_SMALL },
            { id:'jsz', name:'é‡‘æ‰‹é•¯', grade:5, price:15000, width:1, height:1, emoji:'ğŸ“¿', image:'images/jsz.png', category:CATEGORY.GOLD_SMALL },
            { id:'xz', name:'èƒ¸é’ˆ', grade:5, price:20000, width:1, height:1, emoji:'ğŸ§·', image:'images/xz.png', category:CATEGORY.GOLD_SMALL },
            { id:'yds', name:'èƒ°å²›ç´ æ³µ', grade:5, price:15000, width:1, height:1, emoji:'ğŸ’‰', image:'images/yds.png', category:CATEGORY.GOLD_SMALL },
            { id:'zj', name:'é’»æˆ’', grade:5, price:15000, width:1, height:1, emoji:'ğŸ’', image:'images/zj.png', category:CATEGORY.GOLD_SMALL },
            // åŸæœ‰å°é‡‘
            { id:'jtyx', name:'ç›‘å¬éŸ³ç®±', grade:5, price:20000, width:2, height:2, emoji:'ğŸ”Š', image:'images/jtyx.png', category:CATEGORY.GOLD_SMALL },
            { id:'shcj', name:'å¥¢åèŒ¶å…·', grade:5, price:20000, width:2, height:2, emoji:'ğŸµ', image:'images/shcj.png', category:CATEGORY.GOLD_SMALL },
            { id:'dyjp', name:'ç”µå½±èƒ¶ç‰‡', grade:5, price:15000, width:2, height:2, emoji:'ğŸï¸', image:'images/dyjp.png', category:CATEGORY.GOLD_SMALL },
            { id:'jl', name:'é‡‘é“¾', grade:5, price:80000, width:2, height:1, emoji:'ğŸ”—', image:'images/jl.png', category:CATEGORY.GOLD_SMALL },
            { id:'gmsz', name:'å…‰æ˜ä½¿è€…ç¢ç‰‡', grade:5, price:60000, width:1, height:1, emoji:'âš¡', image:'images/gmsz.png', category:CATEGORY.GOLD_SMALL },
            { id:'gdzt', name:'å¤è‘£çƒ›å°', grade:5, price:50000, width:1, height:1, emoji:'ğŸ•¯ï¸', image:'images/gdzt.png', category:CATEGORY.GOLD_SMALL },
            { id:'dmt', name:'å¤šé¢éª°', grade:5, price:50000, width:1, height:1, emoji:'ğŸ²', image:'images/dmt.png', category:CATEGORY.GOLD_SMALL }
        ];

        // ---------- ç´«è‰²ç‰©å“ (ä»·æ ¼ â‰¤1.8w) ----------
        const purpleItems = [
            // æ¨ªå…­ 3x2
            { id:'gjj', name:'é’¢ç­‹å‰ª', grade:4, price:15000, width:3, height:2, emoji:'ğŸ”§', image:'images/gjj.png', category:CATEGORY.PURPLE },
            { id:'lj', name:'é“¾é”¯', grade:4, price:15000, width:3, height:2, emoji:'â›“ï¸', image:'images/lj.png', category:CATEGORY.PURPLE },
            { id:'gwhmx', name:'å›½ç‹å·æ¨¡å‹', grade:4, price:16000, width:3, height:2, emoji:'ğŸ‘‘', image:'images/gwhmx.png', category:CATEGORY.PURPLE },
            // ç«–å…­ 2x3
            { id:'fzdx', name:'ä»¿åˆ¶é›•åƒ', grade:4, price:12000, width:2, height:3, emoji:'ğŸ—¿', image:'images/fzdx.png', category:CATEGORY.PURPLE },
            // æ¨ªä¸‰ 3x1
            { id:'gypld', name:'å·¥è‰ºå“çŒåˆ€', grade:4, price:15000, width:3, height:1, emoji:'ğŸ”ª', image:'images/gypld.png', category:CATEGORY.PURPLE },
            { id:'sgsp', name:'æ‰‹å·¥æ ‘çš®', grade:4, price:8000, width:3, height:1, emoji:'ğŸŒ³', image:'images/sgsp.png', category:CATEGORY.PURPLE },
            { id:'hggsj', name:'è¾‰å…‰ç®¡æ—¶é’Ÿ', grade:4, price:8000, width:3, height:1, emoji:'â²ï¸', image:'images/hggsj.png', category:CATEGORY.PURPLE },
            // å››æ ¼ 2x2
            { id:'bwg', name:'ä¸™çƒ·ç½', grade:4, price:15000, width:2, height:2, emoji:'ğŸ”¥', image:'images/bwg.png', category:CATEGORY.PURPLE },
            { id:'yt', name:'æ²¹æ¡¶', grade:4, price:8000, width:2, height:2, emoji:'â›½', image:'images/yt.png', category:CATEGORY.PURPLE },
            { id:'ncj', name:'è€å†²å‡»ç¡¬èƒ¶', grade:4, price:15000, width:2, height:2, emoji:'ğŸ§ª', image:'images/ncj.png', category:CATEGORY.PURPLE },
            { id:'sn', name:'æ°´æ³¥', grade:4, price:8000, width:2, height:2, emoji:'ğŸ§±', image:'images/sn.png', category:CATEGORY.PURPLE },
            { id:'psudy', name:'PSUç”µæº', grade:4, price:12000, width:2, height:2, emoji:'ğŸ”Œ', image:'images/psudy.png', category:CATEGORY.PURPLE },
            { id:'dnzb', name:'ç”µè„‘ä¸»æ¿', grade:4, price:15000, width:2, height:2, emoji:'ğŸ–¥ï¸', image:'images/dnzb.png', category:CATEGORY.PURPLE },
            { id:'gfj', name:'é¼“é£æœº', grade:4, price:15000, width:2, height:2, emoji:'ğŸ’¨', image:'images/gfj.png', category:CATEGORY.PURPLE },
            { id:'dz', name:'ç”µé’»', grade:4, price:15000, width:2, height:2, emoji:'ğŸ”©', image:'images/dz.png', category:CATEGORY.PURPLE },
            { id:'gjtz', name:'å·¥å…·å¥—ç»„', grade:4, price:15000, width:2, height:2, emoji:'ğŸ§°', image:'images/gjtz.png', category:CATEGORY.PURPLE },
            { id:'xcq', name:'å¸å°˜å™¨', grade:4, price:15000, width:2, height:2, emoji:'ğŸ§¹', image:'images/xcq.png', category:CATEGORY.PURPLE },
            { id:'jjl', name:'é…’ç²¾ç‚‰', grade:4, price:15000, width:2, height:2, emoji:'ğŸ¶', image:'images/jjl.png', category:CATEGORY.PURPLE },
            { id:'wllq', name:'è–‡é›·æ‹‰ç´', grade:4, price:12000, width:2, height:2, emoji:'ğŸ»', image:'images/wllq.png', category:CATEGORY.PURPLE },
            { id:'xdfl', name:'å°è¢‹è‚¥æ–™', grade:4, price:12000, width:2, height:2, emoji:'ğŸŒ±', image:'images/xdfl.png', category:CATEGORY.PURPLE },
            { id:'fdj_mx', name:'å‘åŠ¨æœºæ¨¡å‹', grade:4, price:8000, width:2, height:2, emoji:'ğŸï¸', image:'images/fdj_mx.png', category:CATEGORY.PURPLE },
            { id:'lpbyh', name:'è€ç‰Œå…«éŸ³ç›’', grade:4, price:18000, width:2, height:2, emoji:'ğŸµ', image:'images/lpbyh.png', category:CATEGORY.PURPLE },
            { id:'yh', name:'æ²¹ç”»', grade:4, price:5000, width:2, height:2, emoji:'ğŸ–¼ï¸', image:'images/yh.png', category:CATEGORY.PURPLE },
            { id:'cd_bfq', name:'CDæ’­æ”¾å™¨', grade:4, price:15000, width:2, height:2, emoji:'ğŸ’¿', image:'images/cd_bfq.png', category:CATEGORY.PURPLE },
            { id:'jmtz', name:'ç§¯æœ¨å¥—è£…', grade:4, price:6000, width:2, height:2, emoji:'ğŸ§©', image:'images/jmtz.png', category:CATEGORY.PURPLE },
            { id:'xhm', name:'ç¡åŒ–æ£‰', grade:4, price:8000, width:2, height:2, emoji:'ğŸ§ª', image:'images/xhm.png', category:CATEGORY.PURPLE },
            // æ–°å¢å››æ ¼å°ç´« 2x2
            { id:'ss', name:'ä¼ç»³', grade:4, price:15000, width:2, height:2, emoji:'ğŸ§µ', image:'images/ss.png', category:CATEGORY.PURPLE },
            // æ–°å¢æ¨ªäºŒ 2x1
            { id:'sbq', name:'ç¤ºæ³¢å™¨', grade:4, price:7000, width:2, height:1, emoji:'ğŸ“Š', image:'images/sbq.png', category:CATEGORY.PURPLE },
            { id:'sjx', name:'ç ´æŸæ•°æ®çº¿', grade:4, price:5000, width:2, height:1, emoji:'ğŸ”Œ', image:'images/sjx.png', category:CATEGORY.PURPLE },
            { id:'cjwyj', name:'æµ‹è·æœ›è¿œé•œ', grade:4, price:4000, width:2, height:1, emoji:'ğŸ”­', image:'images/cjwyj.png', category:CATEGORY.PURPLE },
            { id:'dt', name:'ç”µå°', grade:4, price:5000, width:2, height:1, emoji:'ğŸ“»', image:'images/dt.png', category:CATEGORY.PURPLE },
            { id:'qmjy', name:'æ°”å¯†æ£€æµ‹ä»ª', grade:4, price:3000, width:2, height:1, emoji:'ğŸ”§', image:'images/qmjy.png', category:CATEGORY.PURPLE },
            // æ–°å¢ç«–äºŒ 1x2
            { id:'wxdjj', name:'æ— çº¿å¯¹è®²æœº', grade:4, price:5000, width:1, height:2, emoji:'ğŸ“', image:'images/wxdjj.png', category:CATEGORY.PURPLE },
            { id:'pd', name:'ç‚®å¼¹', grade:4, price:8000, width:1, height:2, emoji:'ğŸ’£', image:'images/pd.png', category:CATEGORY.PURPLE },
            { id:'qtjy', name:'æ°”ä½“æ£€æµ‹ä»ª', grade:4, price:5000, width:1, height:2, emoji:'ğŸ”¬', image:'images/qtjy.png', category:CATEGORY.PURPLE },
            // æ–°å¢ç«–ä¸‰ 1x3
            { id:'pdj', name:'ç‚®é˜Ÿé•œ', grade:4, price:10000, width:1, height:3, emoji:'ğŸ”­', image:'images/pdj.png', category:CATEGORY.PURPLE },
            // æ–°å¢ä¸€æ ¼ 1x1
            { id:'mb', name:'ç§’è¡¨', grade:4, price:2000, width:1, height:1, emoji:'â±ï¸', image:'images/mb.png', category:CATEGORY.PURPLE },
            { id:'zxj', name:'ç…§ç›¸æœº', grade:4, price:3000, width:1, height:1, emoji:'ğŸ“·', image:'images/zxj.png', category:CATEGORY.PURPLE },
            { id:'jt', name:'é•œå¤´', grade:4, price:5000, width:1, height:1, emoji:'ğŸ”', image:'images/jt.png', category:CATEGORY.PURPLE },
            { id:'phq', name:'å¹³è¡¡å™¨', grade:4, price:4000, width:1, height:1, emoji:'âš–ï¸', image:'images/phq.png', category:CATEGORY.PURPLE },
            // æ¨ªäºŒ 2x1
            { id:'jyl', name:'æœºæ²¹å£¶', grade:4, price:2000, width:2, height:1, emoji:'ğŸ›¢ï¸', image:'images/jyl.png', category:CATEGORY.PURPLE },
            { id:'whdpm', name:'å®Œå¥½çš„å±å¹•', grade:4, price:4000, width:2, height:1, emoji:'ğŸ“±', image:'images/whdpm.png', category:CATEGORY.PURPLE },
            { id:'qjd', name:'åƒæ–¤é¡¶', grade:4, price:6000, width:2, height:1, emoji:'ğŸ”§', image:'images/qjd.png', category:CATEGORY.PURPLE },
            { id:'jsyj', name:'é‡‘ä¸çœ¼é•œ', grade:4, price:8000, width:2, height:1, emoji:'ğŸ‘“', image:'images/jsyj.png', category:CATEGORY.PURPLE },
            // ç«–äºŒ 1x2
            { id:'jy', name:'æœºæ²¹', grade:4, price:5000, width:1, height:2, emoji:'ğŸ›¢ï¸', image:'images/jy.png', category:CATEGORY.PURPLE },
            { id:'tqgjz', name:'é€šæªå·¥å…·ç»„', grade:4, price:8000, width:1, height:2, emoji:'ğŸ”«', image:'images/tqgjz.png', category:CATEGORY.PURPLE },
            { id:'bgd', name:'è¡¥å…‰ç¯', grade:4, price:8000, width:1, height:2, emoji:'ğŸ’¡', image:'images/bgd.png', category:CATEGORY.PURPLE },
            { id:'gyxl', name:'å·¥è‰ºé¡¹é“¾', grade:4, price:3000, width:1, height:2, emoji:'ğŸ“¿', image:'images/gyxl.png', category:CATEGORY.PURPLE },
            { id:'szz', name:'ç«–åº§é’Ÿ', grade:4, price:5000, width:1, height:2, emoji:'â°', image:'images/szz.png', category:CATEGORY.PURPLE },
            { id:'fdj2', name:'æ”¾å¤§é•œ', grade:4, price:2000, width:1, height:2, emoji:'ğŸ”', image:'images/fdj2.png', category:CATEGORY.PURPLE },
            // ç«–ä¸‰ 1x3
            { id:'fdj', name:'é˜²å¼¹èƒ¶', grade:4, price:8500, width:1, height:3, emoji:'ğŸ›¡ï¸', image:'images/fdj.png', category:CATEGORY.PURPLE },
            { id:'mfpm', name:'å¯†å°æ³¡æ²«', grade:4, price:8000, width:1, height:3, emoji:'ğŸ§¼', image:'images/mfpm.png', category:CATEGORY.PURPLE },
            { id:'gg', name:'é’¢ç®¡', grade:4, price:8000, width:1, height:3, emoji:'ğŸ”©', image:'images/gg.png', category:CATEGORY.PURPLE },
            // ä¸€æ ¼ 1x1
            { id:'zydlb', name:'ä¸“ç”¨ç”µè·¯æ¿', grade:4, price:7000, width:1, height:1, emoji:'ğŸ”Œ', image:'images/zydlb.png', category:CATEGORY.PURPLE },
            { id:'gdzq', name:'å›ºæ€', grade:4, price:4000, width:1, height:1, emoji:'ğŸ’¾', image:'images/gdzq.png', category:CATEGORY.PURPLE },
            { id:'clq', name:'å¤„ç†å™¨', grade:4, price:4000, width:1, height:1, emoji:'âš™ï¸', image:'images/clq.png', category:CATEGORY.PURPLE },
            { id:'tynb', name:'å¤ªé˜³èƒ½æ¿', grade:4, price:8000, width:1, height:1, emoji:'â˜€ï¸', image:'images/tynb.png', category:CATEGORY.PURPLE },
            { id:'hjq', name:'ç¼“é™å™¨', grade:4, price:5000, width:1, height:1, emoji:'ğŸª‚', image:'images/hjq.png', category:CATEGORY.PURPLE },
            { id:'ztq', name:'åŠ©å¬å™¨', grade:4, price:8000, width:1, height:1, emoji:'ğŸ‘‚', image:'images/ztq.png', category:CATEGORY.PURPLE },
            { id:'xs', name:'é¦™æ°´', grade:4, price:8000, width:1, height:1, emoji:'ğŸŒ¸', image:'images/xs.png', category:CATEGORY.PURPLE },
            { id:'wb', name:'è…•è¡¨', grade:4, price:8000, width:1, height:1, emoji:'âŒš', image:'images/wb.png', category:CATEGORY.PURPLE },
            { id:'yxkd', name:'æ¸¸æˆå¡å¸¦', grade:4, price:8000, width:1, height:1, emoji:'ğŸ®', image:'images/yxkd.png', category:CATEGORY.PURPLE },
            { id:'ftqc', name:'å‘æ¡å°æ±½è½¦', grade:4, price:8000, width:1, height:1, emoji:'ğŸš—', image:'images/ftqc.png', category:CATEGORY.PURPLE },
            { id:'mrwj', name:'æ¯›ç»’ç©å…·', grade:4, price:8000, width:1, height:1, emoji:'ğŸ§¸', image:'images/mrwj.png', category:CATEGORY.PURPLE },
            { id:'swyb', name:'ç”Ÿç‰©æ ·æœ¬', grade:4, price:3000, width:1, height:1, emoji:'ğŸ§¬', image:'images/swyb.png', category:CATEGORY.PURPLE },
            { id:'twq', name:'ä½“æ¸©æª', grade:4, price:6000, width:1, height:1, emoji:'ğŸŒ¡ï¸', image:'images/twq.png', category:CATEGORY.PURPLE },
            { id:'hb', name:'æ€€è¡¨', grade:4, price:2000, width:1, height:1, emoji:'âŒ›', image:'images/hb.png', category:CATEGORY.PURPLE },
            { id:'jnyb', name:'çºªå¿µç¡¬å¸', grade:4, price:2000, width:1, height:1, emoji:'ğŸª™', image:'images/jnyb.png', category:CATEGORY.PURPLE },
            { id:'ypsl', name:'é“¶ç‰‡æ‰‹é“¾', grade:4, price:4000, width:1, height:1, emoji:'ğŸ“¿', image:'images/ypsl.png', category:CATEGORY.PURPLE },
            { id:'jxp', name:'æœºæ¢°ç¡¬ç›˜', grade:4, price:4000, width:1, height:1, emoji:'ğŸ’¾', image:'images/jxp.png', category:CATEGORY.PURPLE },
            { id:'ncx', name:'å†…å­˜æ¡', grade:4, price:4000, width:1, height:1, emoji:'ğŸ§ ', image:'images/ncx.png', category:CATEGORY.PURPLE }
        ];

        // ---------- è¾…åŠ©å‡½æ•° ----------
        function formatPrice(price) {
            if (price>=1000000) return (price/1000000).toFixed(1)+'m';
            if (price>=1000) return (price/1000).toFixed(1)+'k';
            return price.toString();
        }

        // ç”Ÿæˆç§‘æ©å¸ (2-3å ï¼Œä»·æ ¼ä¸æ¥è¿‘)
        function generateCoins() {
            const count = Math.floor(Math.random()*2)+2;
            let coins = [];
            for (let i=0;i<count;i++) {
                let price;
                do { price = Math.floor(Math.random()*(1085-1000+1))+1000; }
                while (coins.some(c=>Math.abs(c.price-price)<20));
                coins.push({ ...coinBase, price, id:`coin_${i}_${Date.now()}` });
            }
            return coins;
        }

        // åŠ æƒéšæœºé€‰å–ï¼šä»ç»™å®šæ•°ç»„ä¸­ï¼Œå¤§å°ºå¯¸ç‰©å“ï¼ˆé¢ç§¯â‰¥4ï¼‰æƒé‡ä¸º2ï¼Œå…¶ä½™ä¸º1
        function weightedRandomPick(itemsArray) {
            let pool = [];
            itemsArray.forEach(item => {
                pool.push(item);
                if (item.width * item.height >= 4) {
                    pool.push(item);
                }
            });
            return pool[Math.floor(Math.random() * pool.length)];
        }

        // ç”Ÿæˆç‰©å“åˆ—è¡¨ (æ€»æ•°ä¸è¶…è¿‡7)
        function generateItems() {
            let items = generateCoins();
            const maxItems = 7;
            const remaining = maxItems - items.length;
            if (remaining<=0) return items;
            const otherCount = Math.floor(Math.random()*(remaining+1));
            for (let i=0;i<otherCount;i++) {
                const rand = Math.random();
                let candidate;
                if (IsHighRate) {
                    // é«˜çˆ†ç‡æ¨¡å¼: ç´«50%, å°é‡‘30%, å¤§é‡‘20%
                    if (rand < 0.5) {
                        candidate = weightedRandomPick(purpleItems);
                    } else if (rand < 0.8) {
                        candidate = weightedRandomPick(goldSmallItems);
                    } else {
                        candidate = weightedRandomPick(goldBigItems);
                    }
                } else {
                    // é»˜è®¤æ¦‚ç‡: ç´«70%, å°é‡‘25%, å¤§é‡‘5%
                    if (rand < 0.7) {
                        candidate = purpleItems[Math.floor(Math.random()*purpleItems.length)];
                    } else if (rand < 0.95) {
                        candidate = goldSmallItems[Math.floor(Math.random()*goldSmallItems.length)];
                    } else {
                        candidate = goldBigItems[Math.floor(Math.random()*goldBigItems.length)];
                    }
                }
                items.push({ ...candidate, id:candidate.id+'_'+Date.now()+'_'+i });
            }
            return items;
        }

        // æ”¾ç½®ç‰©å“åˆ°ç½‘æ ¼ï¼Œä¼˜å…ˆå°†ç§‘æ©å¸æ”¾åœ¨å·¦ä¸Šè§’
        function placeItems(items) {
            let grid = Array(ROWS).fill().map(()=>Array(COLS).fill(null));
            const coins = items.filter(item=>item.category===CATEGORY.COIN);
            const others = items.filter(item=>item.category!==CATEGORY.COIN)
                                 .sort((a,b)=>(b.width*b.height)-(a.width*a.height));
            for (let coin of coins) {
                let placed = false;
                for (let row=0;row<ROWS;row++) {
                    for (let col=0;col<COLS;col++) {
                        if (grid[row][col]===null) {
                            grid[row][col] = { item:coin, startRow:row, startCol:col };
                            placed = true;
                            break;
                        }
                    }
                    if (placed) break;
                }
            }
            for (let item of others) {
                let placed = false;
                for (let row=0;row<=ROWS-item.height;row++) {
                    for (let col=0;col<=COLS-item.width;col++) {
                        let free = true;
                        for (let dr=0;dr<item.height;dr++) {
                            for (let dc=0;dc<item.width;dc++) {
                                if (grid[row+dr][col+dc]!==null) { free=false; break; }
                            }
                            if (!free) break;
                        }
                        if (free) {
                            for (let dr=0;dr<item.height;dr++) {
                                for (let dc=0;dc<item.width;dc++) {
                                    grid[row+dr][col+dc] = { item, startRow:row, startCol:col };
                                }
                            }
                            placed = true;
                            break;
                        }
                    }
                    if (placed) break;
                }
            }
            return grid;
        }

        // æ¸²æŸ“åˆå§‹ç½‘æ ¼ (æ‰€æœ‰æ ¼å­ç™½è‰²)
        function renderInitialGrid() {
            const gridEl = document.getElementById('grid');
            gridEl.innerHTML = '';
            for (let row=0;row<ROWS;row++) {
                for (let col=0;col<COLS;col++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    cell.style.backgroundColor = '#ffffff';
                    gridEl.appendChild(cell);
                }
            }
        }

        // æ¸…é™¤æ‰€æœ‰è’™ç‰ˆå’Œè¦†ç›–å±‚
        function clearAllOverlays() {
            document.querySelectorAll('.mask-overlay').forEach(el => el.remove());
            document.querySelectorAll('.item-cover').forEach(el => el.remove());
        }

        // ä¸ºæ¯ä¸ªç‰©å“åˆ›å»ºçº¯é»‘è’™ç‰ˆ
        function createMasks() {
            const wrapper = document.getElementById('grid-wrapper');
            const gridEl = document.getElementById('grid');
            const cells = gridEl.children;
            const itemMap = new Map();
            for (let row=0;row<ROWS;row++) {
                for (let col=0;col<COLS;col++) {
                    const cellData = gridState[row][col];
                    if (cellData) {
                        const id = cellData.item.id;
                        if (!itemMap.has(id)) {
                            const item = cellData.item;
                            itemMap.set(id, {
                                item,
                                startRow:cellData.startRow,
                                startCol:cellData.startCol,
                                endRow:cellData.startRow+item.height-1,
                                endCol:cellData.startCol+item.width-1
                            });
                        }
                    }
                }
            }
            itemMap.forEach(info => {
                const startIndex = info.startRow*COLS + info.startCol;
                const endIndex = info.endRow*COLS + info.endCol;
                const startCell = cells[startIndex];
                const endCell = cells[endIndex];
                if (!startCell || !endCell) return;
                const startRect = startCell.getBoundingClientRect();
                const endRect = endCell.getBoundingClientRect();
                const wrapperRect = wrapper.getBoundingClientRect();
                const left = startRect.left - wrapperRect.left;
                const top = startRect.top - wrapperRect.top;
                const width = endRect.right - startRect.left;
                const height = endRect.bottom - startRect.top;
                const mask = document.createElement('div');
                mask.className = 'mask-overlay';
                mask.style.left = left + 'px';
                mask.style.top = top + 'px';
                mask.style.width = width + 'px';
                mask.style.height = height + 'px';
                mask.id = 'mask-' + info.item.id;
                wrapper.appendChild(mask);
            });
        }

        function showMaskWithOrbit(itemId) {
            const mask = document.getElementById('mask-' + itemId);
            if (mask) {
                mask.innerHTML = `
                    <div class="orbit-container">
                        <i class="fas fa-search"></i>
                    </div>
                `;
            }
        }

        function removeMask(itemId) {
            const mask = document.getElementById('mask-' + itemId);
            if (mask) mask.remove();
        }

        function createItemCover(item, startRow, startCol, endRow, endCol) {
            const wrapper = document.getElementById('grid-wrapper');
            const gridEl = document.getElementById('grid');
            const startCell = gridEl.children[startRow*COLS + startCol];
            const endCell = gridEl.children[endRow*COLS + endCol];
            if (!startCell || !endCell) return;

            const startRect = startCell.getBoundingClientRect();
            const endRect = endCell.getBoundingClientRect();
            const wrapperRect = wrapper.getBoundingClientRect();

            const cover = document.createElement('div');
            cover.className = 'item-cover';
            cover.style.left = (startRect.left - wrapperRect.left) + 'px';
            cover.style.top = (startRect.top - wrapperRect.top) + 'px';
            cover.style.width = (endRect.right - startRect.left) + 'px';
            cover.style.height = (endRect.bottom - startRect.top) + 'px';

            const handleError = () => {
                cover.style.backgroundColor = gradeColors[item.grade] || '#5a5a5a';
                const emojiSpan = document.createElement('span');
                emojiSpan.className = 'emoji-placeholder';
                emojiSpan.textContent = item.emoji;
                cover.appendChild(emojiSpan);
            };

            if (item.image) {
                const img = new Image();
                img.onload = () => {
                    cover.style.backgroundImage = `url('${item.image}')`;
                    cover.style.backgroundColor = 'transparent';
                };
                img.onerror = handleError;
                img.src = item.image;
            } else {
                handleError();
            }

            const details = document.createElement('div');
            details.className = 'item-details';
            details.innerHTML = `<span class="item-name-short">${item.name.slice(0,6)}</span><span class="item-price-tag">${formatPrice(item.price)}</span>`;
            cover.appendChild(details);
            cover.id = 'cover-' + item.id;
            wrapper.appendChild(cover);
        }

        function revealItem(item) {
            let startRow, startCol, endRow, endCol;
            for (let row=0;row<ROWS;row++) {
                for (let col=0;col<COLS;col++) {
                    const cell = gridState[row][col];
                    if (cell && cell.item.id === item.id) {
                        startRow = cell.startRow;
                        startCol = cell.startCol;
                        endRow = startRow + item.height - 1;
                        endCol = startCol + item.width - 1;
                        break;
                    }
                }
            }
            if (startRow === undefined) return;
            const gridEl = document.getElementById('grid');
            const cells = gridEl.children;
            for (let row=startRow; row<=endRow; row++) {
                for (let col=startCol; col<=endCol; col++) {
                    const index = row*COLS + col;
                    const cell = cells[index];
                    cell.className = 'grid-cell';
                    cell.classList.add(gradeColors[item.grade] || 'grade1');
                    cell.innerHTML = '';
                }
            }
            createItemCover(item, startRow, startCol, endRow, endCol);
        }

        function startSearch(containerId) {
            if (isSearching) return;
            revealTimeouts.forEach(clearTimeout);
            revealTimeouts = [];
            clearAllOverlays();

            searchCount++;
            document.getElementById('search-title').innerText = `ç¬¬${searchCount}æ¬¡æœåˆ® ä¿é™©ç®±`;
            document.getElementById('total-price').innerText = '0';

            let items, grid;
            let attempts = 0;
            do {
                items = generateItems();
                grid = placeItems(items);
                attempts++;
            } while (!grid && attempts < 10);
            if (!grid) { alert('ç‰©å“æ”¾ç½®å¤±è´¥'); return; }
            currentItems = items;
            gridState = grid;

            document.getElementById('container-list').style.display = 'none';
            document.getElementById('search-area').style.display = 'block';
            renderInitialGrid();

            const wrapper = document.getElementById('grid-wrapper');
            const overallMask = document.createElement('div');
            overallMask.className = 'overall-mask';
            overallMask.id = 'overall-mask';
            overallMask.innerHTML = '<div class="search-text">æœç´¢ä¸­</div><div class="timer" id="overall-timer">0.00s</div>';
            wrapper.appendChild(overallMask);

            // å¼€å§‹æ’­æ”¾æ•´ä½“æœç´¢éŸ³æ•ˆï¼ˆå…ˆæ’­æ”¾ä¸€æ¬¡ startï¼Œç„¶åå¾ªç¯ loopï¼‰
            playOverallLoop();

            isSearching = true;
            const startTime = performance.now();
            const timerInterval = setInterval(() => {
                const elapsed = (performance.now() - startTime)/1000;
                if (elapsed >= 1.5) clearInterval(timerInterval);
                document.getElementById('overall-timer').innerText = elapsed.toFixed(2)+'s';
            }, 50);

            const overallTimeout = setTimeout(() => {
                clearInterval(timerInterval);
                const overall = document.getElementById('overall-mask');
                if (overall) overall.remove();

                createMasks();

                const uniqueItems = [];
                const seen = new Set();
                for (let row=0;row<ROWS;row++) {
                    for (let col=0;col<COLS;col++) {
                        const cell = gridState[row][col];
                        if (cell && !seen.has(cell.item.id)) {
                            seen.add(cell.item.id);
                            uniqueItems.push(cell.item);
                        }
                    }
                }
                uniqueItems.sort((a,b)=>{
                    if (a.startRow !== b.startRow) return a.startRow - b.startRow;
                    return a.startCol - b.startCol;
                });

                searchNext(0, uniqueItems);
            }, 1500);
            revealTimeouts.push(overallTimeout);
        }

        function searchNext(index, uniqueItems) {
            if (index >= uniqueItems.length) {
                isSearching = false;
                stopOverallLoop(); // æ‰€æœ‰ç‰©å“æ­ç¤ºå®Œæ¯•ï¼Œåœæ­¢æ•´ä½“æœç´¢éŸ³æ•ˆ
                const total = currentItems.reduce((sum,it)=>sum+it.price,0);
                document.getElementById('total-price').innerText = formatPrice(total)+' (æ€»)';
                addToRecords(currentItems);
                return;
            }
            const item = uniqueItems[index];
            showMaskWithOrbit(item.id);
            const searchTime = SEARCH_TIME[item.category] || 1500;
            const timeout = setTimeout(() => {
                removeMask(item.id);
                revealItem(item);
                // æ’­æ”¾å¯¹åº”å“è´¨éŸ³æ•ˆï¼ˆå¯é‡å ï¼‰
                if (item.category === CATEGORY.COIN) playSound('coin');
                else if (item.category === CATEGORY.PURPLE) playSound('purple');
                else if (item.category === CATEGORY.GOLD_SMALL) playSound('goldSmall');
                else if (item.category === CATEGORY.GOLD_BIG) playSound('goldBig');
                vibrateIfGold(item.category);
                searchNext(index+1, uniqueItems);
            }, searchTime);
            revealTimeouts.push(timeout);
        }

        function continueSearch() { if (!isSearching) startSearch(currentContainerId); }
        function backToList() {
            if (isSearching) return;
            revealTimeouts.forEach(clearTimeout);
            revealTimeouts = [];
            stopOverallLoop(); // ç¡®ä¿éŸ³æ•ˆåœæ­¢
            clearAllOverlays();
            document.getElementById('search-area').style.display = 'none';
            document.getElementById('container-list').style.display = 'grid';
        }

        function initContainers() {
            document.getElementById('container-list').innerHTML = `
                <div class="item-card" onclick="startSearch(1)">
                    <div class="item-image">ğŸ”’</div>
                    <div class="item-name">ä¿é™©ç®±</div>
                    <div class="badge">ç‚¹å‡»æœç´¢</div>
                </div>
            `;
        }
        function start() {
            document.getElementById('jinggao').style.display = 'none';
            document.getElementById('moniqi').style.display = 'block';
            initContainers();
        }

        // å¾—åƒè®°å½• (åˆ†ç±»æ˜¾ç¤ºï¼ŒåŒ…å«ç§‘æ©å¸)
        let records = JSON.parse(localStorage.getItem('touchi_records')) || { count:0, items:{} };

        function addToRecords(items) {
            records.count++;
            items.forEach(item => {
                const key = item.name;
                if (records.items[key]) {
                    records.items[key].count += 1;
                } else {
                    records.items[key] = { 
                        name:item.name, 
                        grade:item.grade, 
                        price:item.price, 
                        count:1, 
                        emoji:item.emoji, 
                        image:item.image,
                        category: item.category
                    };
                }
            });
            localStorage.setItem('touchi_records', JSON.stringify(records));
        }

        function showRecords() {
            const modal = document.getElementById('recordsModal');
            const content = document.getElementById('recordsContent');
            let html = '';

            // åˆ†ç±»ç»Ÿè®¡
            const categories = {
                [CATEGORY.GOLD_BIG]: { name: 'å¤§é‡‘', items: [], total: 0, count: 0 },
                [CATEGORY.GOLD_SMALL]: { name: 'å°é‡‘', items: [], total: 0, count: 0 },
                [CATEGORY.PURPLE]: { name: 'å°ç´«', items: [], total: 0, count: 0 },
                [CATEGORY.COIN]: { name: 'ç§‘æ©å¸', items: [], total: 0, count: 0 }
            };

            for (let key in records.items) {
                const it = records.items[key];
                const cat = it.category;
                if (categories[cat]) {
                    categories[cat].items.push(it);
                    categories[cat].total += it.price * it.count;
                    categories[cat].count += it.count;
                }
            }

            let overallTotal = 0;
            for (let cat of [CATEGORY.GOLD_BIG, CATEGORY.GOLD_SMALL, CATEGORY.PURPLE, CATEGORY.COIN]) {
                const c = categories[cat];
                if (c.items.length === 0) continue;
                html += `<div class="record-category">${c.name}ï¼šå…± ${c.count} ä»¶ æ€»ä»· ${formatPrice(c.total)}</div>`;
                overallTotal += c.total;
                c.items.sort((a,b) => b.price - a.price);
                c.items.forEach(it => {
                    html += `
                        <div class="record-item">
                            <div class="item-icon">${it.emoji}</div>
                            <div style="font-size:12px;">${it.name}</div>
                            <div style="font-size:11px;">x${it.count}</div>
                            <div style="color:#b45309;">${formatPrice(it.price * it.count)}</div>
                        </div>
                    `;
                });
            }

            html += `<div class="record-category">æ€»è®¡ï¼š${formatPrice(overallTotal)}</div>`;
            if (html === '') html = '<div class="text-center">æš‚æ— è®°å½•</div>';
            content.innerHTML = html;
            modal.style.display = 'flex';
        }

        function clearRecords() {
            if (confirm('ç¡®å®šæ¸…é™¤æ‰€æœ‰è®°å½•å—ï¼Ÿ')) {
                records = { count:0, items:{} };
                localStorage.removeItem('touchi_records');
                closeModal();
            }
        }

        function closeModal() { document.getElementById('recordsModal').style.display = 'none'; }
    </script>

    <!-- ========== å›¾ç‰‡è§„æ ¼è¯´æ˜ ==========
         1. æ‰€æœ‰ç‰©å“å›¾æ ‡è¯·æ”¾å…¥ images/ æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶åä¸ä¸Šè¿° image å­—æ®µä¸€è‡´ã€‚
         2. å»ºè®®å›¾ç‰‡ä¸ºæ­£æ–¹å½¢ï¼Œè¾¹é•¿ 80px æˆ– 160pxï¼ŒèƒŒæ™¯é€æ˜ï¼Œå†…å®¹å±…ä¸­ã€‚
         3. éŸ³æ•ˆæ–‡ä»¶æ”¾å…¥ sounds/ æ–‡ä»¶å¤¹ï¼šcoin.mp3, purple.mp3, gold_small.mp3, gold_big.mp3, overall_start.mp3, overall_loop.mp3
    -->
</body>
</html>
